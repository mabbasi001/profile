/*! © 2025 Mabbasi - All Rights Reserved */
document.addEventListener('DOMContentLoaded',function(){initTerminalNavigation();initDashboardNavigation();initMobileMenu();initSkillBars();initContactForm();initBlockchainEffects();initInteractiveElements();initTypingAnimation();initWindowManager();initHomeNavigation();initSecurityProtection()});function initTerminalNavigation(){const treeItems = document.querySelectorAll('.tree-item.expandable');const expandedContainer = document.querySelector('.expanded-content-container');const closeButton = document.querySelector('.close-button');const contentSections = document.querySelectorAll('.content-section');treeItems.forEach(item =>{item.addEventListener('click',(e)=>{e.preventDefault();const targetSection = item.getAttribute('data-section');const fileName = item.querySelector('.tree-name').textContent;openTerminalWindow(targetSection,fileName)});item.addEventListener('touchend',(e)=>{e.preventDefault();const targetSection = item.getAttribute('data-section');const fileName = item.querySelector('.tree-name').textContent;openTerminalWindow(targetSection,fileName)})});closeButton.addEventListener('click',()=>{closeExpandedSection()});expandedContainer.addEventListener('click',(e)=>{if(e.target === expandedContainer){closeExpandedSection()}});document.addEventListener('keydown',(e)=>{if(e.key === 'Escape'){closeExpandedSection()}})}function showExpandedSection(sectionId,fileName = 'file.ext'){const expandedContainer = document.querySelector('.expanded-content-container');const contentSections = document.querySelectorAll('.content-section');const currentFileTitle = document.getElementById('current-file');contentSections.forEach(section =>{section.classList.remove('active')});const targetSection = document.getElementById(sectionId);if(targetSection){targetSection.classList.add('active');currentFileTitle.textContent = `viewing: ${fileName}`;expandedContainer.classList.add('active');document.body.style.overflow = 'hidden';setTimeout(()=>{initSectionAnimations(sectionId)},300)}}function closeExpandedSection(){const expandedContainer = document.querySelector('.expanded-content-container');expandedContainer.classList.remove('active');document.body.style.overflow = 'auto'}function initDashboardNavigation(){const navItems = document.querySelectorAll('.nav-item');navItems.forEach(item =>{item.addEventListener('click',(e)=>{e.preventDefault();const targetSection = item.getAttribute('data-section');if(targetSection === 'home'){closeExpandedSection()}else{showExpandedSection(targetSection)}navItems.forEach(nav => nav.classList.remove('active'));item.classList.add('active');const mainNav = document.querySelector('.main-nav');if(mainNav.classList.contains('active')){mainNav.classList.remove('active')}})})}function initTypingAnimation(){const typingElements = document.querySelectorAll('.typing-text');typingElements.forEach(element =>{const text = element.getAttribute('data-text');element.textContent = '';let i = 0;const typeWriter =()=>{if(i < text.length){element.textContent += text.charAt(i);i++;setTimeout(typeWriter,100)}else{setTimeout(()=>{const fileTree = document.querySelector('.file-tree');if(fileTree){fileTree.style.display = 'block'}},500)}};setTimeout(typeWriter,1000)})}function simulateCommand(command,callback){const terminalBody = document.querySelector('.terminal-body');const newLine = document.createElement('div');newLine.className = 'terminal-line';newLine.innerHTML = ` <span class="prompt">mabbasi@portfolio:~$</span> <span class="command">${command}</span> `;terminalBody.appendChild(newLine);if(callback){setTimeout(callback,500)}terminalBody.scrollTop = terminalBody.scrollHeight}let windowCounter = 0;let activeWindows = new Map();let zIndexCounter = 1001;function initWindowManager(){console.log('Window Manager initialized');window.isMobile = window.innerWidth <= 768;window.addEventListener('resize',()=>{window.isMobile = window.innerWidth <= 768})}function openTerminalWindow(sectionId,fileName){if(activeWindows.has(sectionId)){focusWindow(sectionId);return}windowCounter++;const windowId = `window-${windowCounter}`;const windowElement = createTerminalWindow(windowId,sectionId,fileName);const container = document.querySelector('.terminal-windows-container');container.appendChild(windowElement);activeWindows.set(sectionId,{id: windowId,element: windowElement,sectionId: sectionId,fileName: fileName,minimized: false,maximized: false});windowElement.classList.add('active','focused');addToTaskbar(sectionId,fileName);initWindowInteractions(windowElement,sectionId);loadWindowContent(windowElement,sectionId);positionWindow(windowElement)}function createTerminalWindow(windowId,sectionId,fileName){const windowElement = document.createElement('div');windowElement.className = 'terminal-window';windowElement.id = windowId;windowElement.style.zIndex = ++zIndexCounter;windowElement.innerHTML = ` <div class="terminal-window-header"> <div class="terminal-window-controls"> <div class="window-control close" data-action="close">×</div> <div class="window-control minimize" data-action="minimize">−</div> <div class="window-control maximize" data-action="maximize">□</div> </div> <div class="terminal-window-title">mabbasi@portfolio:~/${fileName}</div> </div> <div class="terminal-window-content"> <div class="loading-content"> <span class="prompt">mabbasi@portfolio:~$</span> <span class="command">cat ${fileName}</span> <div class="loading-dots">Loading<span>.</span><span>.</span><span>.</span></div> </div> </div> `;return windowElement}function initWindowInteractions(windowElement,sectionId){const header = windowElement.querySelector('.terminal-window-header');const controls = windowElement.querySelectorAll('.window-control');console.log('Initializing window interactions for:',sectionId);console.log('Header found:',header);console.log('Controls found:',controls.length,controls);if(!window.isMobile){makeDraggable(windowElement,header)}controls.forEach(control =>{control.addEventListener('click',(e)=>{e.stopPropagation();const action = control.getAttribute('data-action');console.log('Window control clicked:',action,'for section:',sectionId);handleWindowAction(sectionId,action)});control.addEventListener('touchend',(e)=>{e.preventDefault();e.stopPropagation();const action = control.getAttribute('data-action');console.log('Window control touched:',action,'for section:',sectionId);handleWindowAction(sectionId,action)})});windowElement.addEventListener('mousedown',()=>{focusWindow(sectionId)});windowElement.addEventListener('touchstart',()=>{focusWindow(sectionId)})}function handleWindowAction(sectionId,action){console.log('handleWindowAction called:',sectionId,action);const windowData = activeWindows.get(sectionId);if(!windowData){console.log('No window data found for:',sectionId);return}const windowElement = windowData.element;console.log('Window element found:',windowElement);switch(action){case 'close': console.log('Closing window:',sectionId);closeWindow(sectionId);break;case 'minimize': console.log('Minimizing window:',sectionId);minimizeWindow(sectionId);break;case 'maximize': console.log('Toggling maximize for window:',sectionId);toggleMaximize(sectionId);break;default: console.log('Unknown action:',action)}}function closeWindow(sectionId){const windowData = activeWindows.get(sectionId);if(!windowData)return;windowData.element.remove();removeFromTaskbar(sectionId);activeWindows.delete(sectionId)}function minimizeWindow(sectionId){const windowData = activeWindows.get(sectionId);if(!windowData)return;windowData.element.style.display = 'none';windowData.minimized = true;updateTaskbarItem(sectionId,false)}function toggleMaximize(sectionId){if(window.isMobile){return}const windowData = activeWindows.get(sectionId);if(!windowData)return;const windowElement = windowData.element;if(windowData.maximized){windowElement.classList.remove('maximized');windowData.maximized = false}else{windowElement.classList.add('maximized');windowData.maximized = true}}function focusWindow(sectionId){activeWindows.forEach((windowData)=>{windowData.element.classList.remove('focused')});const windowData = activeWindows.get(sectionId);if(!windowData)return;if(windowData.minimized){windowData.element.style.display = 'block';windowData.minimized = false}windowData.element.classList.add('focused');windowData.element.style.zIndex = ++zIndexCounter;updateTaskbarItems()}function positionWindow(windowElement){if(window.isMobile){return}const offset =(windowCounter - 1)* 30;windowElement.style.top = Math.min(100 + offset,window.innerHeight - 400)+ 'px';windowElement.style.left = Math.min(100 + offset,window.innerWidth - 600)+ 'px'}function loadWindowContent(windowElement,sectionId){const contentDiv = windowElement.querySelector('.terminal-window-content');const targetSection = document.getElementById(sectionId);if(targetSection){setTimeout(()=>{contentDiv.innerHTML = targetSection.outerHTML;contentDiv.querySelector('.content-section').classList.add('active');if(sectionId === 'skills'){setTimeout(()=>{animateSkillBars()},300)}initSectionAnimations(sectionId)},500)}}function addToTaskbar(sectionId,fileName){const taskbarItems = document.querySelector('.taskbar-items');const taskbarItem = document.createElement('div');taskbarItem.className = 'taskbar-item active';taskbarItem.setAttribute('data-section',sectionId);taskbarItem.textContent = fileName;taskbarItem.addEventListener('click',()=>{focusWindow(sectionId)});taskbarItems.appendChild(taskbarItem)}function removeFromTaskbar(sectionId){const taskbarItem = document.querySelector(`.taskbar-item[data-section="${sectionId}"]`);if(taskbarItem){taskbarItem.remove()}}function updateTaskbarItem(sectionId,active){const taskbarItem = document.querySelector(`.taskbar-item[data-section="${sectionId}"]`);if(taskbarItem){taskbarItem.classList.toggle('active',active)}}function updateTaskbarItems(){document.querySelectorAll('.taskbar-item').forEach(item =>{const sectionId = item.getAttribute('data-section');const windowData = activeWindows.get(sectionId);const isActive = windowData && windowData.element.classList.contains('focused')&& !windowData.minimized;item.classList.toggle('active',isActive)})}function makeDraggable(element,handle){let pos1 = 0,pos2 = 0,pos3 = 0,pos4 = 0;handle.addEventListener('mousedown',dragMouseDown);function dragMouseDown(e){e.preventDefault();pos3 = e.clientX;pos4 = e.clientY;document.addEventListener('mouseup',closeDragElement);document.addEventListener('mousemove',elementDrag)}function elementDrag(e){e.preventDefault();pos1 = pos3 - e.clientX;pos2 = pos4 - e.clientY;pos3 = e.clientX;pos4 = e.clientY;const newTop = element.offsetTop - pos2;const newLeft = element.offsetLeft - pos1;const maxTop = window.innerHeight - element.offsetHeight;const maxLeft = window.innerWidth - element.offsetWidth;element.style.top = Math.max(0,Math.min(newTop,maxTop))+ 'px';element.style.left = Math.max(0,Math.min(newLeft,maxLeft))+ 'px'}function closeDragElement(){document.removeEventListener('mouseup',closeDragElement);document.removeEventListener('mousemove',elementDrag)}}function initMobileMenu(){const mobileToggle = document.querySelector('.mobile-toggle');const mainNav = document.querySelector('.main-nav');if(mobileToggle && mainNav){mobileToggle.addEventListener('click',()=>{mainNav.classList.toggle('active');mobileToggle.classList.toggle('active')});document.addEventListener('click',(e)=>{if(!mobileToggle.contains(e.target)&& !mainNav.contains(e.target)){mainNav.classList.remove('active');mobileToggle.classList.remove('active')}})}}function showSection(sectionId){const contentSections = document.querySelectorAll('.content-section');contentSections.forEach(section =>{section.classList.remove('active')});const targetSection = document.getElementById(sectionId);if(targetSection){targetSection.classList.add('active');setTimeout(()=>{initSectionAnimations(sectionId)},100)}}function initSectionAnimations(sectionId){switch(sectionId){case 'skills': animateSkillBars();break;case 'home': animateDashboardCards();break;case 'projects': animateProjectCards();break;case 'certifications': animateCertCards();break}}function initSkillBars(){const skillBars = document.querySelectorAll('.skill-progress');skillBars.forEach(bar =>{const width = bar.getAttribute('data-width');bar.style.width = '0%'})}function animateSkillBars(){const skillBars = document.querySelectorAll('.skill-progress');skillBars.forEach((bar,index)=>{const width = bar.getAttribute('data-width');if(width){bar.style.width = '0%';setTimeout(()=>{bar.style.width = width + '%'},index * 200 + 100)}})}function animateDashboardCards(){const cards = document.querySelectorAll('.dashboard-card');cards.forEach((card,index)=>{card.style.opacity = '0';card.style.transform = 'translateY(30px)';setTimeout(()=>{card.style.transition = 'all 0.6s cubic-bezier(0.4,0,0.2,1)';card.style.opacity = '1';card.style.transform = 'translateY(0)'},index * 150)})}function animateProjectCards(){const cards = document.querySelectorAll('.project-card');cards.forEach((card,index)=>{card.style.opacity = '0';card.style.transform = 'translateX(-30px)';setTimeout(()=>{card.style.transition = 'all 0.6s cubic-bezier(0.4,0,0.2,1)';card.style.opacity = '1';card.style.transform = 'translateX(0)'},index * 200)})}function animateCertCards(){const cards = document.querySelectorAll('.cert-card');cards.forEach((card,index)=>{card.style.opacity = '0';card.style.transform = 'scale(0.8)';setTimeout(()=>{card.style.transition = 'all 0.6s cubic-bezier(0.4,0,0.2,1)';card.style.opacity = '1';card.style.transform = 'scale(1)'},index * 100)})}function initContactForm(){const form = document.querySelector('.contact-form');if(form){form.addEventListener('submit',(e)=>{e.preventDefault();const submitBtn = form.querySelector('.submit-btn');const originalText = submitBtn.innerHTML;submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';submitBtn.disabled = true;setTimeout(()=>{showNotification('Message sent successfully! I\'ll get back to you soon.','success');form.reset();submitBtn.innerHTML = originalText;submitBtn.disabled = false},2000)})}}function showNotification(message,type = 'info'){const existingNotification = document.querySelector('.notification');if(existingNotification){existingNotification.remove()}const notification = document.createElement('div');notification.className = `notification notification-${type}`;notification.innerHTML = ` <div class="notification-content"> <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i> <span>${message}</span> <button class="notification-close">&times;</button> </div> `;notification.style.cssText = ` position: fixed;top: 20px;right: 20px;background: ${type === 'success' ? 'linear-gradient(45deg,#22c55e,#16a34a)' : 'linear-gradient(45deg,#3b82f6,#2563eb)'};color: white;padding: 1rem 1.5rem;border-radius: 12px;box-shadow: 0 10px 30px rgba(0,0,0,0.3);z-index: 10000;transform: translateX(100%);transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);max-width: 400px;backdrop-filter: blur(20px);`;document.body.appendChild(notification);setTimeout(()=>{notification.style.transform = 'translateX(0)'},100);const closeBtn = notification.querySelector('.notification-close');closeBtn.addEventListener('click',()=>{closeNotification(notification)});setTimeout(()=>{if(document.body.contains(notification)){closeNotification(notification)}},5000)}function closeNotification(notification){notification.style.transform = 'translateX(100%)';setTimeout(()=>{if(document.body.contains(notification)){notification.remove()}},300)}function initBlockchainEffects(){createFloatingParticles();createNetworkConnections();initInteractiveHovers()}function createFloatingParticles(){const particleContainer = document.createElement('div');particleContainer.style.cssText = ` position: fixed;top: 0;left: 0;width: 100%;height: 100%;pointer-events: none;z-index: -1;overflow: hidden;`;document.body.appendChild(particleContainer);for(let i = 0;i < 15;i++){const particle = document.createElement('div');particle.style.cssText = ` position: absolute;width: 4px;height: 4px;background: rgba(59,130,246,0.6);border-radius: 50%;box-shadow: 0 0 10px rgba(59,130,246,0.8);animation: particleFloat ${8 + Math.random()* 4}s linear infinite;left: ${Math.random()* 100}%;top: ${Math.random()* 100}%;animation-delay: ${Math.random()* 8}s;`;particleContainer.appendChild(particle)}const particleStyles = ` @keyframes particleFloat{0%{transform: translateY(0px)translateX(0px)rotate(0deg);opacity: 0}10%{opacity: 1}90%{opacity: 1}100%{transform: translateY(-100vh)translateX(50px)rotate(360deg);opacity: 0}}`;const styleSheet = document.createElement('style');styleSheet.textContent = particleStyles;document.head.appendChild(styleSheet)}function createNetworkConnections(){const networkContainer = document.createElement('div');networkContainer.style.cssText = ` position: fixed;top: 0;left: 0;width: 100%;height: 100%;pointer-events: none;z-index: -1;overflow: hidden;`;document.body.appendChild(networkContainer);for(let i = 0;i < 8;i++){const node = document.createElement('div');node.style.cssText = ` position: absolute;width: 6px;height: 6px;background: radial-gradient(circle,rgba(59,130,246,0.8),rgba(139,92,246,0.6));border-radius: 50%;box-shadow: 0 0 20px rgba(59,130,246,0.8);animation: nodePulse ${3 + Math.random()* 2}s ease-in-out infinite;left: ${Math.random()* 100}%;top: ${Math.random()* 100}%;animation-delay: ${Math.random()* 3}s;`;networkContainer.appendChild(node)}const nodeStyles = ` @keyframes nodePulse{0%,100%{transform: scale(1);box-shadow: 0 0 20px rgba(59,130,246,0.8)}50%{transform: scale(1.5);box-shadow: 0 0 30px rgba(59,130,246,1)}}`;const nodeStyleSheet = document.createElement('style');nodeStyleSheet.textContent = nodeStyles;document.head.appendChild(nodeStyleSheet)}function initInteractiveHovers(){const cards = document.querySelectorAll('.dashboard-card,.skill-category,.experience-card,.cert-card,.project-card');cards.forEach(card =>{card.addEventListener('mouseenter',()=>{card.style.transform = 'translateY(-8px)scale(1.02)';card.style.boxShadow = '0 25px 50px rgba(0,0,0,0.4),0 0 30px rgba(59,130,246,0.3)'});card.addEventListener('mouseleave',()=>{card.style.transform = '';card.style.boxShadow = ''})});const techItems = document.querySelectorAll('.tech-item,.project-item');techItems.forEach(item =>{item.addEventListener('mouseenter',()=>{item.style.transform = 'translateX(10px)';item.style.background = 'rgba(59,130,246,0.15)'});item.addEventListener('mouseleave',()=>{item.style.transform = '';item.style.background = ''})})}function initInteractiveElements(){const statNumbers = document.querySelectorAll('.stat-number');const animateCounters =()=>{statNumbers.forEach(stat =>{const target = parseInt(stat.textContent);const increment = target / 50;let current = 0;const timer = setInterval(()=>{current += increment;if(current >= target){current = target;clearInterval(timer)}if(stat.textContent.includes('+')){stat.textContent = Math.floor(current)+ '+'}else if(stat.textContent.includes('%')){stat.textContent = Math.floor(current)+ '%'}else{stat.textContent = Math.floor(current)}},50)})};setTimeout(animateCounters,1000);const socialLinks = document.querySelectorAll('.social-links a,.social-links-contact a');socialLinks.forEach(link =>{link.addEventListener('mouseenter',()=>{link.style.transform = 'translateY(-3px)scale(1.1)';link.style.boxShadow = '0 10px 25px rgba(59,130,246,0.4)'});link.addEventListener('mouseleave',()=>{link.style.transform = '';link.style.boxShadow = ''})})}document.addEventListener('keydown',(e)=>{const navItems = document.querySelectorAll('.nav-item');const activeNav = document.querySelector('.nav-item.active');const currentIndex = Array.from(navItems).indexOf(activeNav);if(e.key === 'ArrowDown' || e.key === 'ArrowUp'){e.preventDefault();let nextIndex;if(e.key === 'ArrowDown'){nextIndex =(currentIndex + 1)% navItems.length}else{nextIndex =(currentIndex - 1 + navItems.length)% navItems.length}navItems[nextIndex].click();navItems[nextIndex].focus()}});function smoothScrollTo(element,duration = 300){const start = element.scrollTop;const target = 0;const change = target - start;const startTime = performance.now();function animateScroll(currentTime){const elapsed = currentTime - startTime;const progress = Math.min(elapsed / duration,1);const easeInOutCubic = progress < 0.5 ? 4 * progress * progress * progress : 1 - Math.pow(-2 * progress + 2,3)/ 2;element.scrollTop = start +(change * easeInOutCubic);if(progress < 1){requestAnimationFrame(animateScroll)}}requestAnimationFrame(animateScroll)}window.addEventListener('load',()=>{showSection('home');const dashboard = document.querySelector('.dashboard-container');dashboard.style.opacity = '0';dashboard.style.transform = 'scale(0.95)';setTimeout(()=>{dashboard.style.transition = 'all 0.8s cubic-bezier(0.4,0,0.2,1)';dashboard.style.opacity = '1';dashboard.style.transform = 'scale(1)'},100)});function initHomeNavigation(){console.log('Initializing home navigation...');const homeLogo = document.getElementById('home-logo');console.log('Home logo element:',homeLogo);if(homeLogo){console.log('Home logo found,adding event listeners');homeLogo.addEventListener('click',(e)=>{e.preventDefault();console.log('Home logo clicked!');if(typeof activeWindows !== 'undefined' && activeWindows.size > 0){console.log('Closing',activeWindows.size,'windows');activeWindows.forEach((windowData,sectionId)=>{closeWindow(sectionId)})}console.log('Closing expanded sections');closeExpandedSection();homeLogo.style.transform = 'scale(0.95)';setTimeout(()=>{homeLogo.style.transform = 'scale(1)'},150);console.log('Home navigation completed')});homeLogo.style.cursor = 'pointer';homeLogo.addEventListener('mouseenter',()=>{homeLogo.style.transform = 'scale(1.05)';homeLogo.style.transition = 'transform 0.2s ease'});homeLogo.addEventListener('mouseleave',()=>{homeLogo.style.transform = 'scale(1)'})}else{console.error('Home logo element not found! Make sure the element has id="home-logo"')}}function initSecurityProtection(){document.addEventListener('contextmenu',function(e){e.preventDefault();return false});document.addEventListener('keydown',function(e){if(e.key === 'F12' ||(e.ctrlKey && e.shiftKey &&(e.key === 'I' || e.key === 'C'))||(e.ctrlKey && e.key === 'u')){e.preventDefault();return false}if(e.ctrlKey && e.key === 's'){e.preventDefault();return false}});document.querySelectorAll('.terminal-container,.file-tree,.terminal-window').forEach(el =>{el.style.userSelect = 'none';el.style.webkitUserSelect = 'none';el.style.mozUserSelect = 'none';el.style.msUserSelect = 'none'});const style = document.createElement('style');style.textContent = ` ::selection{background: transparent}::-moz-selection{background: transparent}body{-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none}img{-webkit-user-drag: none;-khtml-user-drag: none;-moz-user-drag: none;-o-user-drag: none;user-drag: none}`;document.head.appendChild(style);console.clear();console.log('%c🚨 STOP! 🚨','color: red;font-size: 50px;font-weight: bold;');console.log('%cThis is a browser feature intended for developers. Content on this website is protected by copyright law.','color: red;font-size: 16px;');console.log('%c© 2025 Mabbasi - All Rights Reserved','color: #00ff00;font-size: 14px;font-weight: bold;');let devtools ={open: false,orientation: null};const threshold = 160;setInterval(()=>{if(window.outerHeight - window.innerHeight > threshold || window.outerWidth - window.innerWidth > threshold){if(!devtools.open){devtools.open = true;console.clear();console.log('%c⚠️ Developer tools detected!','color: red;font-size: 20px;')}}else{devtools.open = false}},500);document.addEventListener('dragstart',function(e){e.preventDefault();return false});window.addEventListener('beforeprint',function(e){e.preventDefault();return false})}const debounce =(func,wait)=>{let timeout;return function executedFunction(...args){const later =()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout = setTimeout(later,wait)}};window.addEventListener('resize',debounce(()=>{const sidebar = document.querySelector('.sidebar');const mainContent = document.querySelector('.main-content');if(window.innerWidth <= 768){sidebar.style.order = '2';mainContent.style.order = '1'}else{sidebar.style.order = '';mainContent.style.order = ''}},250));